# Time Capsule モノレポ

このプロジェクトはモノレポ構成で、フロントエンド、バックエンド、インフラを統合的に管理しています。

## セットアップ手順

以下の手順に従って、プロジェクトのセットアップを行ってください。

### 前提条件

- macOS または Linux 環境
- `git` がインストールされていること
- 必要に応じて `sudo` 権限

### セットアップ方法

#### 方法 1: `make install` を使用

以下のコマンドを実行して、リポジトリのセットアップを行います。

```bash
make install
```

#### 方法 2: スクリプトを直接実行

以下のコマンドを実行して、リポジトリのセットアップを行います。

```bash
./setup-repository.sh
```

### スクリプトの内容

セットアップスクリプトは以下の作業を自動的に行います。

1. OS とシェルの検出
2. 必要な依存関係のインストール
   - macOS: `asdf` のインストール (Homebrew 経由)
   - Linux: `asdf` のインストール (Git 経由)
3. Node.js のインストール (`asdf` を使用)
4. `pnpm` のインストール
5. インストールの検証

### 注意事項

- スクリプトは `bash` と `zsh` の両方で動作します。
- スクリプト実行後、シェルの設定ファイル (`~/.bashrc` または `~/.zshrc`) が更新されます。必要に応じて手動で確認してください。
- `pnpm` コマンドが認識されない場合は、シェルを再起動するか、以下のコマンドを実行してください。

```bash
source ~/.bashrc  # bash を使用している場合
source ~/.zshrc   # zsh を使用している場合
```

### セットアップ完了後

セットアップが完了したら、以下のコマンドで各ツールのバージョンを確認してください。

```bash
node -v
npm -v
pnpm -v
```

すべてのバージョンが正しく表示されれば、セットアップは成功です。

## フロントエンドアプリケーションの起動

### 方法 1: `make dev` を使用

以下のコマンドを実行して、フロントエンドの開発サーバーを起動します。

```bash
make dev
```

### 方法 2: `pnpm` を直接使用

以下の手順で `frontend` フォルダの Next.js アプリケーションを起動できます。

1. プロジェクトルートに移動します。

```bash
cd time-capsule
```

2. `pnpm` を使用して依存関係をインストールします。

```bash
pnpm install
```

3. `frontend` フォルダの開発サーバーを起動します。

```bash
pnpm --filter frontend dev
```

4. ブラウザで以下の URL にアクセスしてアプリケーションを確認します。

```
http://localhost:3000
```

### 注意事項

- `pnpm` のフィルタリング機能を使用して、`frontend` フォルダのみに対してコマンドを実行しています。
- 開発サーバーのデフォルトポートは `3000` です。他のプロセスで使用されている場合は、ポートを変更してください。
